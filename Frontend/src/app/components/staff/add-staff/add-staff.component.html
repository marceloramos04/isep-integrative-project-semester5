<form [formGroup]="form" novalidate (ngSubmit)="submit()">
    <mat-card class="details-card">
        <mat-card-header>
            <mat-card-title>Staff Details</mat-card-title>
        </mat-card-header>
        <mat-card-content>

            <div class="row">
                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>First name</mat-label>
                        <input matInput formControlName="firstName">
                        @if (submitted && form.controls['firstName'].hasError('required')) {
                        <mat-error>First name is <strong>required</strong></mat-error>
                        }
                        <button mat-icon-button matSuffix *ngIf="form.get('firstName')?.value"
                            (click)="clearField('firstName')">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Last name</mat-label>
                        <input matInput formControlName="lastName">
                        @if (submitted && form.controls['lastName'].hasError('required')) {
                        <mat-error>Last name is <strong>required</strong></mat-error>
                        }
                        <button mat-icon-button matSuffix *ngIf="form.get('lastName')?.value"
                            (click)="clearField('lastName')">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">

                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>License Number</mat-label>
                        <input matInput formControlName="licenseNumber">
                        @if (submitted && form.controls['licenseNumber'].hasError('required')) {
                        <mat-error>License Number is <strong>required</strong></mat-error>
                        }
                        <button mat-icon-button matSuffix *ngIf="form.get('licenseNumber')?.value"
                            (click)="clearField('licenseNumber')">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Specialization</mat-label>
                        <mat-select formControlName="specialization">
                            @for (specialization of specializations; track specialization) {
                            <mat-option [value]="specialization">{{ specialization }}</mat-option>
                            }
                        </mat-select>
                        @if (submitted && form.controls['specialization'].hasError('required')) {
                        <mat-error>Specialization is <strong>required</strong></mat-error>
                        }
                        <button mat-icon-button matSuffix *ngIf="form.get('specialization')?.value"
                            (click)="clearField('specialization')">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>

            </div>

            <div class="row">

                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Phone number</mat-label>
                        <input type='tel' matInput formControlName="phoneNumber">
                        @if (submitted && form.controls['phoneNumber'].hasError('required')) {
                        <mat-error>Phone Number is <strong>required</strong></mat-error>
                        }
                        <mat-icon matSuffix>phone</mat-icon>
                        <button mat-icon-button matSuffix *ngIf="form.get('phoneNumber')?.value"
                            (click)="clearField('phoneNumber')">
                            <mat-icon>close</mat-icon>
                        </button>
                        <mat-hint>Include area code</mat-hint>
                    </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Email</mat-label>
                        <input matInput placeholder="user@example.com" formControlName="email">
                        @if (submitted && form.controls['email'].hasError('required')) {
                        <mat-error>Email is <strong>required</strong></mat-error>
                        }
                        <button mat-icon-button matSuffix *ngIf="form.get('email')?.value"
                            (click)="clearField('email')">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>


            <div class="row">

                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Slot start</mat-label>
                        <input matInput [matTimepicker]="startPicker" formControlName="slotStart">
                        <mat-timepicker-toggle matIconSuffix [for]="startPicker" />
                        <mat-timepicker #startPicker />
                    </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Slot end</mat-label>
                        <input matInput [matTimepicker]="endPicker" formControlName="slotEnd">
                        <mat-timepicker-toggle matIconSuffix [for]="endPicker" />
                        <mat-timepicker #endPicker />
                    </mat-form-field>
                </div>


                <div class="col">
                    <button mat-button type="button" (click)="addTimeSlot()">Add Availability Slot</button>
                </div>

            </div>

            <table mat-table [dataSource]="availabilitySlots" class="mat-elevation-z8">
                <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->

                <!-- Position Column -->
                <ng-container matColumnDef="start">
                    <th mat-header-cell *matHeaderCellDef>Slot Start</th>
                    <td mat-cell *matCellDef="let s">{{ s.start }}</td>
                </ng-container>

                <ng-container matColumnDef="end">
                    <th mat-header-cell *matHeaderCellDef>Slot End</th>
                    <td mat-cell *matCellDef="let s">{{ s.end }}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef>Actions</th>
                    <td mat-cell *matCellDef="let rs; let i = index">
                        <button mat-icon-button type="button" color="primary" (click)="removeTimeSlot(i)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>

        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button color="primary" type="submit">Submit</button>
        </mat-card-actions>
    </mat-card>
</form>